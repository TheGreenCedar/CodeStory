// This file has been generated by Specta. DO NOT EDIT.

export type AgentAnswerDto = {
  prompt: string;
  summary: string;
  sections: AgentResponseSectionDto[];
  citations: AgentCitationDto[];
  graphs: GraphArtifactDto[];
};

export type AgentAskRequest = {
  prompt: string;
  include_mermaid?: boolean;
  focus_node_id?: NodeId | null;
  max_results?: number | null;
};

export type AgentCitationDto = {
  node_id: NodeId;
  display_name: string;
  kind: NodeKind;
  file_path: string | null;
  line: number | null;
  score: number;
};

export type AgentResponseSectionDto = {
  id: string;
  title: string;
  markdown: string;
  graph_ids: string[];
};

export type ApiError = { code: string; message: string };

export type AppEventPayload =
  | { type: "IndexingStarted"; data: { file_count: number } }
  | { type: "IndexingProgress"; data: { current: number; total: number } }
  | { type: "IndexingComplete"; data: { duration_ms: number } }
  | { type: "IndexingFailed"; data: { error: string } }
  | { type: "StatusUpdate"; data: { message: string } };

export type EdgeId = string;

export type EdgeKind =
  | "MEMBER"
  | "TYPE_USAGE"
  | "USAGE"
  | "CALL"
  | "INHERITANCE"
  | "OVERRIDE"
  | "TYPE_ARGUMENT"
  | "TEMPLATE_SPECIALIZATION"
  | "INCLUDE"
  | "IMPORT"
  | "MACRO_USAGE"
  | "ANNOTATION_USAGE"
  | "UNKNOWN";

export type GraphArtifactDto =
  | { kind: "uml"; id: string; title: string; graph: GraphResponse }
  | { kind: "mermaid"; id: string; title: string; diagram: string; mermaid_syntax: string };

export type GraphEdgeDto = {
  id: EdgeId;
  source: NodeId;
  target: NodeId;
  kind: EdgeKind;
  confidence?: number | null;
  /**
   * `certain`, `probable`, or `uncertain`.
   */
  certainty?: string | null;
  callsite_identity?: string | null;
  candidate_targets?: NodeId[];
};

export type GraphNodeDto = {
  id: NodeId;
  label: string;
  kind: NodeKind;
  depth: number;
  label_policy?: string | null;
  badge_visible_members?: number | null;
  badge_total_members?: number | null;
  merged_symbol_examples?: string[];
};

export type GraphRequest = {
  center_id: NodeId;
  /**
   * Optional cap to avoid pulling extremely dense neighborhoods into the UI.
   */
  max_edges: number | null;
};

export type GraphResponse = {
  center_id: NodeId;
  nodes: GraphNodeDto[];
  edges: GraphEdgeDto[];
  truncated: boolean;
};

export type IndexMode = "Full" | "Incremental";

export type ListChildrenSymbolsRequest = { parent_id: NodeId };

export type ListRootSymbolsRequest = { limit: number | null };

export type NodeDetailsDto = {
  id: NodeId;
  kind: NodeKind;
  display_name: string;
  serialized_name: string;
  qualified_name: string | null;
  canonical_id: string | null;
  file_path: string | null;
  start_line: number | null;
  start_col: number | null;
  end_line: number | null;
  end_col: number | null;
};

export type NodeDetailsRequest = { id: NodeId };

export type NodeId = string;

export type NodeKind =
  | "MODULE"
  | "NAMESPACE"
  | "PACKAGE"
  | "FILE"
  | "STRUCT"
  | "CLASS"
  | "INTERFACE"
  | "ANNOTATION"
  | "UNION"
  | "ENUM"
  | "TYPEDEF"
  | "TYPE_PARAMETER"
  | "BUILTIN_TYPE"
  | "FUNCTION"
  | "METHOD"
  | "MACRO"
  | "GLOBAL_VARIABLE"
  | "FIELD"
  | "VARIABLE"
  | "CONSTANT"
  | "ENUM_CONSTANT"
  | "UNKNOWN";

export type OpenProjectRequest = { path: string };

export type ProjectSummary = { root: string; stats: StorageStatsDto };

export type ReadFileTextRequest = { path: string };

export type ReadFileTextResponse = { path: string; text: string };

export type SearchHit = {
  node_id: NodeId;
  display_name: string;
  kind: NodeKind;
  file_path: string | null;
  line: number | null;
  score: number;
};

export type SearchRequest = { query: string };

export type SetUiLayoutRequest = { json: string };

export type StartIndexingRequest = { mode: IndexMode };

export type StorageStatsDto = {
  node_count: number;
  edge_count: number;
  file_count: number;
  error_count: number;
};

export type SymbolSummaryDto = {
  id: NodeId;
  label: string;
  kind: NodeKind;
  file_path: string | null;
  has_children: boolean;
};

export type TrailCallerScope = "ProductionOnly" | "IncludeTestsAndBenches";

export type TrailConfigDto = {
  root_id: NodeId;
  mode?: TrailMode;
  target_id?: NodeId | null;
  /**
   * Use `0` to mean "infinite" (bounded by `max_nodes`).
   */
  depth: number;
  direction: TrailDirection;
  caller_scope?: TrailCallerScope;
  edge_filter: EdgeKind[];
  show_utility_calls?: boolean;
  node_filter?: NodeKind[];
  max_nodes: number;
};

export type TrailDirection = "Incoming" | "Outgoing" | "Both";

export type TrailMode = "Neighborhood" | "AllReferenced" | "AllReferencing" | "ToTargetSymbol";

export type WriteFileResponse = { bytes_written: number };

export type WriteFileTextRequest = { path: string; text: string };
